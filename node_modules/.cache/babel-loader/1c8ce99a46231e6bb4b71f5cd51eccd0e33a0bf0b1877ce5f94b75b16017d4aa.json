{"ast":null,"code":"import React,{useState,useMemo}from'react';import{formatDateFr}from'../utils/dateUtils';import'../styles/FilterTable.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FilterTable=_ref=>{let{quotes}=_ref;const[sortConfig,setSortConfig]=useState({key:null,direction:'asc'});// Extraire tous les types de filtres disponibles\nconst filterTypes=useMemo(()=>{const types=new Set();quotes.forEach(quote=>{Object.keys(quote).forEach(key=>{if((key.startsWith('LP')||key.startsWith('LM'))&&typeof quote[key]==='number'){types.add(key);}});});return Array.from(types).sort();},[quotes]);// Calculer les totaux par colonne\nconst totals=useMemo(()=>{const sums={};filterTypes.forEach(type=>{sums[type]=quotes.reduce((sum,quote)=>sum+(quote[type]||0),0);});return sums;},[quotes,filterTypes]);// Tri des données\nconst sortedQuotes=useMemo(()=>{if(!sortConfig.key)return quotes;return[...quotes].sort((a,b)=>{const aValue=a[sortConfig.key]||0;const bValue=b[sortConfig.key]||0;if(aValue<bValue){return sortConfig.direction==='asc'?-1:1;}if(aValue>bValue){return sortConfig.direction==='asc'?1:-1;}return 0;});},[quotes,sortConfig]);const handleSort=key=>{setSortConfig(prev=>({key,direction:prev.key===key&&prev.direction==='asc'?'desc':'asc'}));};const getSortIcon=key=>{if(sortConfig.key!==key)return'⇅';return sortConfig.direction==='asc'?'↑':'↓';};if(quotes.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"Aucun devis trouv\\xE9 pour cette p\\xE9riode.\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"filter-table-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"filter-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort('dateVehicule'),children:[\"Date \",getSortIcon('dateVehicule')]}),/*#__PURE__*/_jsx(\"th\",{children:\"N\\xB0 Devis\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Marque\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mod\\xE8le\"}),filterTypes.map(type=>/*#__PURE__*/_jsxs(\"th\",{onClick:()=>handleSort(type),children:[type,\" \",getSortIcon(type)]},type))]})}),/*#__PURE__*/_jsx(\"tbody\",{children:sortedQuotes.map(quote=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:formatDateFr(quote.dateVehicule)}),/*#__PURE__*/_jsx(\"td\",{children:quote.lead||quote.id}),/*#__PURE__*/_jsx(\"td\",{children:quote.marque||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:quote.modele||'N/A'}),filterTypes.map(type=>/*#__PURE__*/_jsx(\"td\",{className:quote[type]>0?'has-value':'',children:quote[type]||0},type))]},quote.id))}),/*#__PURE__*/_jsx(\"tfoot\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"totals-row\",children:[/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"TOTAUX\"})}),filterTypes.map(type=>/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"strong\",{children:totals[type]})},type))]})})]})})});};export default FilterTable;","map":{"version":3,"names":["React","useState","useMemo","formatDateFr","jsx","_jsx","jsxs","_jsxs","FilterTable","_ref","quotes","sortConfig","setSortConfig","key","direction","filterTypes","types","Set","forEach","quote","Object","keys","startsWith","add","Array","from","sort","totals","sums","type","reduce","sum","sortedQuotes","a","b","aValue","bValue","handleSort","prev","getSortIcon","length","className","children","onClick","map","dateVehicule","lead","id","marque","modele","colSpan"],"sources":["/home/runner/work/HeroBase/HeroBase/src/components/FilterTable.js"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { formatDateFr } from '../utils/dateUtils';\nimport '../styles/FilterTable.css';\n\nconst FilterTable = ({ quotes }) => {\n  const [sortConfig, setSortConfig] = useState({ key: null, direction: 'asc' });\n\n  // Extraire tous les types de filtres disponibles\n  const filterTypes = useMemo(() => {\n    const types = new Set();\n    quotes.forEach(quote => {\n      Object.keys(quote).forEach(key => {\n        if ((key.startsWith('LP') || key.startsWith('LM')) && typeof quote[key] === 'number') {\n          types.add(key);\n        }\n      });\n    });\n    return Array.from(types).sort();\n  }, [quotes]);\n\n  // Calculer les totaux par colonne\n  const totals = useMemo(() => {\n    const sums = {};\n    filterTypes. forEach(type => {\n      sums[type] = quotes.reduce((sum, quote) => sum + (quote[type] || 0), 0);\n    });\n    return sums;\n  }, [quotes, filterTypes]);\n\n  // Tri des données\n  const sortedQuotes = useMemo(() => {\n    if (!sortConfig.key) return quotes;\n\n    return [...quotes].sort((a, b) => {\n      const aValue = a[sortConfig. key] || 0;\n      const bValue = b[sortConfig.key] || 0;\n\n      if (aValue < bValue) {\n        return sortConfig.direction === 'asc' ? -1 : 1;\n      }\n      if (aValue > bValue) {\n        return sortConfig.direction === 'asc' ? 1 : -1;\n      }\n      return 0;\n    });\n  }, [quotes, sortConfig]);\n\n  const handleSort = (key) => {\n    setSortConfig(prev => ({\n      key,\n      direction: prev.key === key && prev.direction === 'asc' ? 'desc' : 'asc'\n    }));\n  };\n\n  const getSortIcon = (key) => {\n    if (sortConfig.key !== key) return '⇅';\n    return sortConfig.direction === 'asc' ? '↑' : '↓';\n  };\n\n  if (quotes.length === 0) {\n    return <div className=\"no-data\">Aucun devis trouvé pour cette période.</div>;\n  }\n\n  return (\n    <div className=\"filter-table-container\">\n      <div className=\"table-wrapper\">\n        <table className=\"filter-table\">\n          <thead>\n            <tr>\n              <th onClick={() => handleSort('dateVehicule')}>\n                Date {getSortIcon('dateVehicule')}\n              </th>\n              <th>N° Devis</th>\n              <th>Marque</th>\n              <th>Modèle</th>\n              {filterTypes.map(type => (\n                <th key={type} onClick={() => handleSort(type)}>\n                  {type} {getSortIcon(type)}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {sortedQuotes.map((quote) => (\n              <tr key={quote.id}>\n                <td>{formatDateFr(quote.dateVehicule)}</td>\n                <td>{quote.lead || quote.id}</td>\n                <td>{quote.marque || 'N/A'}</td>\n                <td>{quote.modele || 'N/A'}</td>\n                {filterTypes.map(type => (\n                  <td key={type} className={quote[type] > 0 ? 'has-value' : ''}>\n                    {quote[type] || 0}\n                  </td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n          <tfoot>\n            <tr className=\"totals-row\">\n              <td colSpan=\"4\"><strong>TOTAUX</strong></td>\n              {filterTypes.map(type => (\n                <td key={type}><strong>{totals[type]}</strong></td>\n              ))}\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default FilterTable;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}